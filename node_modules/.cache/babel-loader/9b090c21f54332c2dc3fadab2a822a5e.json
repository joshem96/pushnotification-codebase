{"ast":null,"code":"import{globalInfo,initialiseGlobalInfo}from'../global_Info.js';function deleteAllPushSubmissions(){console.log('delete script started');debugger;initialiseGlobalInfo();//DELTE ALL SUBMISSIONS\n//************************************************\n//global variables\n//-----------------\n//ENTER API KEY\n// var apiKey = \"f78958f78beefa5e3e88255e7559579b\"\n//ENTER FORM ID (of form you want to delete submissions for)\n// var formID = '221101537081038'\n//************************************************\n//fetch all submissions and then all delete submissions\n//-----------------\n//takes a string and injects it into the API status after 2 seconds\nfunction APILogBuffer(log){//after 10s, return the string (log)\nsetTimeout(function(){globalInfo.APIStatus.innerHTML=''+log;},2000);}//var submissionResponses = '' //becomes array of all submission responses\n//fetch all submission data into an array from the API\nfunction fetchSubmissionResponses(){window.JF.getFormSubmissions(globalInfo.formID,function(response){console.log('recieved form submission data');globalInfo.submissionResponses=response;});}//DELETE ALL SUBMISSIONS\nfunction deleteSubmissionResponses(){//forEach form submission response, delete the data\n//after this has been run, it will be as if a new form was created (no data)\ndebugger;for(var i=0;i<globalInfo.submissionResponses.length;i++){debugger;//via the id, for each response delete the response submission\nwindow.JF.deleteSubmission(globalInfo.submissionResponses[i].id,function(response){debugger;/**\r\n                         successful response including a text message\r\n                        .\r\n                        */console.log(\" \".concat(response));});//console.log(submissionResponses[i].id);\n}}//when API has loaded (window.JF != ''), run the following scripts to execute the deletion of all form submissions\nvar whenAPILoaded='';whenAPILoaded=setInterval(function(){if(window.JF!=''){//fetch submission responses\nfetchSubmissionResponses();//when API has retieved submission responses, run delete submission responses function\nvar checkSubmissionsResponse='';checkSubmissionsResponse=setInterval(function(){if(globalInfo.submissionResponses!=''){deleteSubmissionResponses();clearInterval(checkSubmissionsResponse);}},100);}clearInterval(whenAPILoaded);console.log('delete from submissions script has been ran');APILogBuffer(' delete all submissions script has been ran');},500);console.log(globalInfo);}export{deleteAllPushSubmissions};","map":{"version":3,"names":["globalInfo","initialiseGlobalInfo","deleteAllPushSubmissions","console","log","APILogBuffer","setTimeout","APIStatus","innerHTML","fetchSubmissionResponses","window","JF","getFormSubmissions","formID","response","submissionResponses","deleteSubmissionResponses","i","length","deleteSubmission","id","whenAPILoaded","setInterval","checkSubmissionsResponse","clearInterval"],"sources":["C:/Users/Josh/Documents/Code/push-ui-v1/my-app/src/designed_ui/submitDeleteMessages/functions.js"],"sourcesContent":["\r\n        import { globalInfo,initialiseGlobalInfo } from '../global_Info.js';\r\n        function deleteAllPushSubmissions(){\r\n\r\n            console.log('delete script started');\r\n\r\n            debugger;\r\n            \r\n            initialiseGlobalInfo();\r\n\r\n            //DELTE ALL SUBMISSIONS\r\n            //************************************************\r\n\r\n            //global variables\r\n            //-----------------\r\n\r\n            //ENTER API KEY\r\n            // var apiKey = \"f78958f78beefa5e3e88255e7559579b\"\r\n\r\n            //ENTER FORM ID (of form you want to delete submissions for)\r\n            // var formID = '221101537081038'\r\n\r\n\r\n            //************************************************\r\n\r\n            //fetch all submissions and then all delete submissions\r\n            //-----------------\r\n\r\n            //takes a string and injects it into the API status after 2 seconds\r\n            function APILogBuffer(log){\r\n                //after 10s, return the string (log)\r\n                setTimeout( () => {\r\n                    globalInfo.APIStatus.innerHTML =  ''+ log;\r\n                },2000)\r\n            }\r\n\r\n            //var submissionResponses = '' //becomes array of all submission responses\r\n\r\n            //fetch all submission data into an array from the API\r\n            function fetchSubmissionResponses(){\r\n\r\n                window.JF.getFormSubmissions(globalInfo.formID, function(response){\r\n                    console.log('recieved form submission data')\r\n\r\n                    globalInfo.submissionResponses = response;\r\n\r\n                })\r\n            }\r\n\r\n            //DELETE ALL SUBMISSIONS\r\n            function deleteSubmissionResponses(){\r\n            //forEach form submission response, delete the data\r\n            //after this has been run, it will be as if a new form was created (no data)\r\n\r\n                debugger;\r\n                for(var i = 0; i < globalInfo.submissionResponses.length; i++){\r\n                debugger;\r\n                    //via the id, for each response delete the response submission\r\n                    window.JF.deleteSubmission(globalInfo.submissionResponses[i].id, function(response){\r\n                    debugger;\r\n                        /**\r\n                         successful response including a text message\r\n                        .\r\n                        */\r\n                        console.log(` ${response}`);\r\n                    })\r\n                    //console.log(submissionResponses[i].id);\r\n\r\n                }\r\n\r\n            }\r\n\r\n            //when API has loaded (window.JF != ''), run the following scripts to execute the deletion of all form submissions\r\n            var whenAPILoaded = '';\r\n            whenAPILoaded = setInterval( () => {\r\n                if(window.JF != ''){\r\n\r\n                    //fetch submission responses\r\n                    fetchSubmissionResponses();\r\n\r\n                    //when API has retieved submission responses, run delete submission responses function\r\n                    var checkSubmissionsResponse = '';\r\n                    checkSubmissionsResponse = setInterval ( () => {\r\n                        if(globalInfo.submissionResponses != '') {\r\n                            deleteSubmissionResponses() \r\n                            clearInterval(checkSubmissionsResponse);\r\n                        }\r\n                    },100)\r\n\r\n                }\r\n\r\n                clearInterval(whenAPILoaded);\r\n                console.log('delete from submissions script has been ran');\r\n                APILogBuffer(' delete all submissions script has been ran')\r\n            },500)\r\n        \r\n\r\n        console.log(globalInfo)\r\n        }\r\n\r\n        export{deleteAllPushSubmissions}"],"mappings":"AACQ,OAASA,UAAU,CAACC,oBAAoB,KAAQ,mBAAmB,CACnE,QAASC,yBAAwB,EAAE,CAE/BC,OAAO,CAACC,GAAG,CAAC,uBAAuB,CAAC,CAEpC,SAEAH,oBAAoB,EAAE,CAEtB;AACA;AAEA;AACA;AAEA;AACA;AAEA;AACA;AAGA;AAEA;AACA;AAEA;AACA,QAASI,aAAY,CAACD,GAAG,CAAC,CACtB;AACAE,UAAU,CAAE,UAAM,CACdN,UAAU,CAACO,SAAS,CAACC,SAAS,CAAI,EAAE,CAAEJ,GAAG,CAC7C,CAAC,CAAC,IAAI,CAAC,CACX,CAEA;AAEA;AACA,QAASK,yBAAwB,EAAE,CAE/BC,MAAM,CAACC,EAAE,CAACC,kBAAkB,CAACZ,UAAU,CAACa,MAAM,CAAE,SAASC,QAAQ,CAAC,CAC9DX,OAAO,CAACC,GAAG,CAAC,+BAA+B,CAAC,CAE5CJ,UAAU,CAACe,mBAAmB,CAAGD,QAAQ,CAE7C,CAAC,CAAC,CACN,CAEA;AACA,QAASE,0BAAyB,EAAE,CACpC;AACA;AAEI,SACA,IAAI,GAAIC,EAAC,CAAG,CAAC,CAAEA,CAAC,CAAGjB,UAAU,CAACe,mBAAmB,CAACG,MAAM,CAAED,CAAC,EAAE,CAAC,CAC9D,SACI;AACAP,MAAM,CAACC,EAAE,CAACQ,gBAAgB,CAACnB,UAAU,CAACe,mBAAmB,CAACE,CAAC,CAAC,CAACG,EAAE,CAAE,SAASN,QAAQ,CAAC,CACnF,SACI;AACxB;AACA;AACA,0BACwBX,OAAO,CAACC,GAAG,YAAKU,QAAQ,EAAG,CAC/B,CAAC,CAAC,CACF;AAEJ,CAEJ,CAEA;AACA,GAAIO,cAAa,CAAG,EAAE,CACtBA,aAAa,CAAGC,WAAW,CAAE,UAAM,CAC/B,GAAGZ,MAAM,CAACC,EAAE,EAAI,EAAE,CAAC,CAEf;AACAF,wBAAwB,EAAE,CAE1B;AACA,GAAIc,yBAAwB,CAAG,EAAE,CACjCA,wBAAwB,CAAGD,WAAW,CAAG,UAAM,CAC3C,GAAGtB,UAAU,CAACe,mBAAmB,EAAI,EAAE,CAAE,CACrCC,yBAAyB,EAAE,CAC3BQ,aAAa,CAACD,wBAAwB,CAAC,CAC3C,CACJ,CAAC,CAAC,GAAG,CAAC,CAEV,CAEAC,aAAa,CAACH,aAAa,CAAC,CAC5BlB,OAAO,CAACC,GAAG,CAAC,6CAA6C,CAAC,CAC1DC,YAAY,CAAC,6CAA6C,CAAC,CAC/D,CAAC,CAAC,GAAG,CAAC,CAGVF,OAAO,CAACC,GAAG,CAACJ,UAAU,CAAC,CACvB,CAEA,OAAOE,wBAAwB"},"metadata":{},"sourceType":"module"}